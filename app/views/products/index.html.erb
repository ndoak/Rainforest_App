<h1>All Products</h1>
<%= form_tag products_path, method: :get, authentication: false, id: 'search-form' do %>
  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Search" %>
<% end %>

<div id="products">
  <%= render @products %>
</div>
<script type="text/javascript">
  function display_search_results() {
    if (this.readyState === 4) {
      console.log(this);
      document.getElementById('products').innerHTML = this.responseText;
    }
  }
  var form = document.getElementById('search-form');
  form.addEventListener('submit', function(event) {
    event.preventDefault();
    var searchValue = document.getElementById('search').value;

    var xhr = new XMLHttpRequest();
    xhr.onload = display_search_results;
    xhr.open('GET', '/products?search=' + searchValue, true);
    xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    xhr.send();
  });
  </script>
  <!-- <%= link_to "Login", new_session_path %>
  <%= link_to "Signup", new_user_path %> -->
    <!-- <div class = "link">
    <%= link_to "Create new product", new_product_path %><br>
    </div>

  <% @products.each do |product| %>
    <div class="product_item">
      <%= product.name %>
    </div>
    <div class="product_item">
      <%= product.description %>
    </div>
    <div class="product_item">
      <%= product.formatted_price %>
    </div>
      <%= link_to "Show Product", product_path(product) %>
  <% end %> -->
